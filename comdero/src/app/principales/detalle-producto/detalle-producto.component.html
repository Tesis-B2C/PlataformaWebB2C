<ng-template #contentComentario let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Editar comentario</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true" style="font-size: large">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <label>Comentario</label>
        <div class="input-group">
          <textarea type="text" name="workoutName" class="form-control" id="workout-name" rows="5"
                    [(ngModel)]="comentario"></textarea>

        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="editarComentario();modal.close('Save click')">Guardar
    </button>
  </div>
</ng-template>

<!-- ============================ COMPONENT MODAL ================================= -->
<ng-template #contentPedido let-modal>
  <div class="modal-header py-1">
    <p class="modal-title font-weight-bold">Finalice su compra en COMDERO</p>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click'); cerrar()">
      <span aria-hidden="true" style="font-size: x-large">&times;</span>
    </button>
  </div>
  <div *ngIf="(!this.direccionEnvioDiferente && !this.datosfacturacionDiferente && !this.siguienteDetallePedido)"
       class="modal-body px-0">
    <div class="form-row px-3">
      <div class="form-group col-lg-3 col-12 text-center">
        <img [src]="getImagen(this.varianteActiva.IMAGENES[0].IMAGEN)" alt="..." class="img-modal">
      </div>
      <div class="form-group col-lg-9 col-12">
        <p class="modal-title text-justify"><strong>{{this.productoDetalle?.PRODUCTO.NOMBRE_PRODUCTO}}</strong></p>
        <p class="mb-0 text-justify">Cantidad: {{this.varianteActiva.CANTIDAD}}</p>
        <p class="mb-0 text-justify">Tienda: <label
          class="title tituloTienda text-primary p-0"> {{this.productoDetalle?.TIENDA.NOMBRE_COMERCIAL}}</label></p>
        <div class="row mt-1">
          <div class="col-sm-3 col-4">
            <article *ngIf="this.existeColor == true" class="gallery-wrap">
              <div class="thumbs-wrap m-0">
                <div class="item-thumbCompra">
                  <p id="btnValueColor1" class="item-opciones1"
                     [style.background-color]="this.varianteActiva.COLOR"></p>
                </div>
              </div> <!-- thumbs-wrap.// -->
            </article>
          </div>
          <div class="col-sm-9 col-8">
            <p *ngIf="this.existeTalla == true" class="mb-0"><strong>Talla: </strong> {{this.varianteActiva.TALLA}}
            </p>
            <p *ngIf="this.existeMaterial== true" class="mb-0">
              <strong>Material: </strong> {{this.varianteActiva.MATERIAL}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-body pb-0">
      <div class="form-row">
        <div class="form-group col-sm-3 col-12 mb-0">
          <label class="font-weight-bold">Método de envío</label>
        </div>

        <div class="form-group col-sm-9 col-12">
          <div class="radio-item">
            <input [checked]="this.informacionCompra.METODO_ENVIO_COMPRA == 'Acordar'"
                   (change)="selectMetodoEnvio($event)" type="radio" name="metodoEnvio" id="acordarVendedor"
                   value="Acordar">
            <label for="acordarVendedor">&nbsp;&nbsp;Acordar con el vendedor</label>
          </div>
          <div *ngIf="this.mostrarTiendaEnvioRetiro" class="radio-item">
            <input [checked]="this.informacionCompra.METODO_ENVIO_COMPRA == 'Retiro'"
                   (change)="selectMetodoEnvio($event)" type="radio" name="metodoEnvio" id="retiroNegocio"
                   value="Retiro">
            <label for="retiroNegocio">&nbsp;&nbsp;Retirar en la tienda</label>
          </div>
          <div *ngIf="this.mostrarTiendaEnvioDomicilio" class="radio-item">
            <input [checked]="this.informacionCompra.METODO_ENVIO_COMPRA == 'Domicilio'"
                   (change)="selectMetodoEnvio($event)" type="radio" name="metodoEnvio" id="envioDomicilio"
                   value="Domicilio">
            <label for="envioDomicilio">&nbsp;&nbsp;Envío a domicilio</label>
            <br class="m-0">
            <span *ngIf="this.noExisteEnvioEstaArea" class="text-danger small">Por el momento no se puede calcular el envío a esta zona, pero usted
              puede acordar con el vendedor y realizar su compra.</span>
            <span
              *ngIf="this.banderaDireccionEnvio && this.informacionCompra.DATOS_ENTREGA.CALLE_PRINCIPAL_ENTREGA == null && !this.noExisteEnvioEstaArea"
              class="text-danger small">Es importante que ingrese la direccion de envío para continuar con su compra.</span>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-body" *ngIf="this.banderaDireccionEnvio">
      <div class="form-row">
        <div class="form-group col-sm-3 col-12 mb-0">
          <label class="font-weight-bold">Dirección de envío</label>
        </div>

        <div class="form-group col-sm-9 col-12 mb-0">
          <div *ngIf="this.informacionCompra?.DATOS_ENTREGA.CALLE_PRINCIPAL_ENTREGA != null">
            <label
              class="text-justify mb-0">{{this.informacionCompra?.DATOS_ENTREGA.NOMBRE_PERSONA_ENVIO_ENTREGA}}
              ({{this.informacionCompra?.DATOS_ENTREGA.IDENTIFICACION_ENTREGA}})</label>
            <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_ENTREGA.TELEFONO_ENTREGA}}</p>
            <p class="text-justify mb-1">{{this.informacionCompra?.DATOS_ENTREGA.NUM_CASA_ENTREGA}}
              {{this.informacionCompra?.DATOS_ENTREGA.CALLE_PRINCIPAL_ENTREGA}}
              {{this.informacionCompra?.DATOS_ENTREGA.CALLE_SECUNDARIA_ENTREGA}},
              {{this.ciudadDireccionNombre}},
              {{this.provinciaDireccionNombre}},
              {{this.informacionCompra?.DATOS_ENTREGA.NUM_COD_POSTAL_ENTREGA}}
            </p>
          </div>
          <button (click)="habilitarDireccionDiferente('Envio')"><label class="nuevaDireccionEnvio"> <a
            class="text-primary p-0">Enviar a una dirección diferente</a></label>
          </button>
        </div>
      </div>
    </div>

    <div class="card card-body pb-0">
      <div class="form-row">
        <div class="form-group col-sm-3 col-12 mb-0">
          <label class="font-weight-bold">Método de pago</label>
        </div>

        <div class="form-group col-sm-9 col-12">
          <div *ngIf="this.mostrarTiendaPagoEfectivo && !this.banderaDireccionEnvio" class="radio-item">
            <input [checked]="this.informacionCompra.METODO_PAGO_COMPRA == 'Efectivo'"
                   (change)="selectMetodoPago($event)" type="radio"
                   name="metodoPago" id="pagoEfectivo" value="Efectivo">
            <label for="pagoEfectivo">&nbsp;&nbsp;Efectivo</label>
          </div>
          <div *ngIf="this.mostrarTiendaPagoTransferencia" class="radio-item">
            <input [checked]="this.informacionCompra.METODO_PAGO_COMPRA == 'Transferencia'"
                   (change)="selectMetodoPago($event)" type="radio" name="metodoPago" id="pagotransferencia"
                   value="Transferencia">
            <label for="pagotransferencia">&nbsp;&nbsp;Transferencia bancaria</label>
          </div>
          <div *ngIf="this.mostrarTiendaPagoElectronico" class="radio-item">
            <input [checked]="this.informacionCompra.METODO_PAGO_COMPRA == 'Electrónico'"
                   (change)="selectMetodoPago($event)" type="radio" name="metodoPago" id="pagoPayPal"
                   value="Electrónico">
            <label for="pagoPayPal">&nbsp;&nbsp;Pago electrónico PayPal</label>
          </div>
        </div>
      </div>
    </div>

    <div class="card card-body">
      <div class="form-row">
        <div class="form-group col-sm-3 col-12 mb-0">
          <label class="font-weight-bold">Datos de facturación</label>
        </div>

        <div class="form-group col-sm-9 col-12 mb-0">
          <div *ngIf="this.informacionCompra?.DATOS_FACTURA.IDENTIFICACION_FACTURA != null">
            <label class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.NOMBRE_FACTURA }}
              ({{this.informacionCompra?.DATOS_FACTURA.IDENTIFICACION_FACTURA}})</label>
            <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.CORREO}}</p>
            <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.TELEFONO_FACTURA}}</p>
            <p class="text-justify mb-1">{{this.informacionCompra?.DATOS_FACTURA.DIRECCION_FACTURA}}</p>
          </div>
          <button (click)="habilitarDireccionDiferente('Factura')"><label class="nuevaDireccionEnvio">
            <a class="text-primary p-0">Factura con otros datos</a></label>
          </button>
        </div>
      </div>
    </div>

    <div class="card card-body">
      <div class="form-row">
        <div class="form-group col-sm-3 col-12 mb-0">
          <label class="font-weight-bold">Total</label>
        </div>

        <div class="form-group col-sm-9 col-12">

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Productos ({{this.informacionCompra.CANTIDAD}}
              )</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0"></label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.TOTAL_PRODUCTOS | currency}}</label></div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0">
              <label class="my-0">Cálculo de impuestos por cobrar
                ({{this.informacionCompra.COSTOS.PORCENTAJE_IMPUESTO}}%)</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0"></label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.IMPUESTOS | currency}}</label>
              <div class="px-sm-1 px-lg-5 px-md-3">
                <hr class="my-1">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Subtotal</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0"></label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra?.COSTOS.SUBTOTAL | currency}}</label></div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Descuento
              ({{this.informacionCompra?.COSTOS.PORCENTAJE_AUTOMATICO}}%)</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0">(-)</label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra?.COSTOS.DESCUENTOS | currency}}</label></div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Descuento Cupón
              ({{this.informacionCompra.COSTOS.PORCENTAJE_CUPON}}%)</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0">(-)</label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.CUPON | currency}}</label></div>
          </div>

          <div *ngIf="this.banderaRecargoPaypal" class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Recargo por PayPal
              ({{this.informacionCompra.COSTOS.PORCENTAJE_RECARGO_PAYPAL}}%)</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0">(+)</label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.RECARGO_PAYPAL | currency}}</label>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Costo de envío</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0">(+)</label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.COSTOS_ENVIO | currency}}</label>
              <div class="px-sm-1 px-lg-5 px-md-3">
                <hr class="my-1">
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-6 mb-0"><label class="my-0">Total del pedido:</label></div>
            <div class="form-group col-1 my-0 text-right"><label class="my-0"></label></div>
            <div class="form-group col-5 my-0 text-center"><label
              class="my-0">{{this.informacionCompra.COSTOS.TOTAL_PEDIDO | currency}}</label></div>
          </div>

          <div class="form-row mt-4">
            <div class="form-group col-md-6 col-md-6 col-12 my-0">
              <div class="input-group">
                <input #CuponDescuentoNombre="ngModel" [(ngModel)]="this.cuponDescuentoNombre" type="text"
                       class="tamanioInputs form-control text-uppercase"
                       placeholder="Introducir el cupón" name="CuponDescuentoNombre ">
                <span class="input-group-append">
                    <button (click)="aplicarCuponDescuento()" class="btn btn-primary ">Aplicar</button>
                  </span>
              </div>
            </div>
          </div>


          <div *ngIf="this.banCuponUtilizado" class="alert alert-warning alert-dismissible fade show mb-0 w-25"
               role="alert">
            Cupón ya utilizado
            <button type="button" class="close p-0 m-0" (click)="this.banCuponUtilizado=false">
              <a aria-hidden="true">&times;</a>
            </button>
          </div>

          <div *ngIf="this.bandCuponActivado" class="alert alert-warning alert-dismissible fade show mb-0  w-25"
               role="alert">
            Cupón no válido
            <button type="button" class="close p-0 m-0" (click)="this.bandCuponActivado=false">
              <a aria-hidden="true">&times;</a>
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div *ngIf="this.direccionEnvioDiferente" class="modal-body px-0 pt-2">
    <button class="px-3" (click)="habilitarDireccionDiferente('Envio')"><label class="nuevaDireccionEnvio"> <a
      class="text-primary p-0"><i class="fas fa-chevron-left"></i>&nbsp;&nbsp;Regresar</a></label></button>
    <div class="form-row px-5" *ngIf="this.informacionCompra?.DATOS_ENTREGA.CALLE_PRINCIPAL_ENTREGA != null">
      <div class="form-group col-auto mb-0">
        <div>
          <label class="text-center">Actual</label>
        </div>
      </div>
      <div class="form-group col-auto mb-0">
        <label
          class="text-justify mb-0">{{this.informacionCompra?.DATOS_ENTREGA.NOMBRE_PERSONA_ENVIO_ENTREGA}}
          ({{this.informacionCompra?.DATOS_ENTREGA.IDENTIFICACION_ENTREGA}})</label>
        <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_ENTREGA.TELEFONO_ENTREGA}}</p>
        <p class="text-justify mb-1">{{this.informacionCompra?.DATOS_ENTREGA.NUM_CASA_ENTREGA}}
          {{this.informacionCompra?.DATOS_ENTREGA.CALLE_PRINCIPAL_ENTREGA}}
          {{this.informacionCompra?.DATOS_ENTREGA.CALLE_SECUNDARIA_ENTREGA}},
          {{this.ciudadDireccionNombre}},
          {{this.provinciaDireccionNombre}},
          {{this.informacionCompra?.DATOS_ENTREGA.NUM_COD_POSTAL_ENTREGA}}
        </p>
      </div>
    </div>

    <form #FormActualizarDireccionEnvio id="formActualizarDireccionEnvio" name="formActualizarDireccionEnvio"
          class="validate-form px-5" validate-form>
      <br>
      <label class="font-weight-bold">Dirección de envío nueva</label>

      <div class="form-row">
        <div class="col-md-6 form-group">
          <label>Tipo de persona</label>
          <select (change)="cambiarTipoEntrega($event.target.value)" type="text" class="form-control tamanioInputs">
            <option [selected]="banderaTipoEntrega" value="Persona">Persona Natural</option>
            <option [selected]="!banderaTipoEntrega" value="Empresa">Empresa</option>
          </select>
        </div>
        <div *ngIf="banderaTipoEntrega" class="col-md-6 form-group">
          <label>* Nombres y Apellidos</label>
          <input #NombreA="ngModel" style="text-transform: uppercase;"
                 [(ngModel)]="this.DatosDireccion.Nombre"
                 [ngClass]="{'is-invalid': (NombreA.invalid && (NombreA.dirty || NombreA.touched))}"
                 [pattern]='this.soloLetrasPattern'
                 class="tamanioInputs form-control " name="NombreA" placeholder="" required
                 type="text"> <!--form-control-sm-->
          <div *ngIf="NombreA.invalid && (NombreA.dirty || NombreA.touched)">
            <div *ngIf="NombreA.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo requerido.</p>
            </div>
            <div *ngIf="NombreA.errors.pattern">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                Utilice solo letras.</p>
            </div>
          </div>
        </div>

        <div *ngIf="!banderaTipoEntrega" class=" col form-group">
          <label>* Razon Social</label>
          <input #Razon_Social="ngModel" style="text-transform: uppercase;"
                 [(ngModel)]="this.DatosDireccion.Nombre"
                 [ngClass]="{'is-invalid': Razon_Social.invalid && (Razon_Social.dirty || Razon_Social.touched)}"
                 [pattern]='this.LetrasNumerosPattern'
                 class="tamanioInputs form-control" name="razon_Social" placeholder=""
                 required type="text">
          <div *ngIf="Razon_Social.invalid && (Razon_Social.dirty || Razon_Social.touched)">
            <div *ngIf="Razon_Social.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo requerido.</p>
            </div>
            <div *ngIf="Razon_Social.errors.pattern">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Utilice solo letras y
                numeros.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="form-row">
          <div *ngIf="banderaTipoEntrega" class="form-group col-lg-6">
            <label>* Cédula</label>
            <input #Cedula="ngModel"
                   [(ngModel)]="this.DatosDireccion.Id_Agente"
                   [ngClass]="{'is-invalid': Cedula.invalid && (Cedula.dirty || Cedula.touched)}"
                   [pattern]='this.soloNumerosPattern'
                   class="tamanioInputs form-control" maxlength="10"
                   minlength="10" name="cedula" placeholder=""
                   type="text" required>
            <div *ngIf="Cedula.invalid && (Cedula.dirty || Cedula.touched)">
              <div *ngIf="Cedula.errors.required">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo
                  requerido.</p>
              </div>
              <div *ngIf="Cedula.errors.minlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Minimo 10 digitos.</p>
              </div>
              <div *ngIf="Cedula.errors.maxlength">
                <p class="alert alert-danger"> &nbsp; <i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Maximo 10 digitos.</p>
              </div>
              <div *ngIf="Cedula.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Utilice solo numeros. </p>
              </div>
            </div>
          </div>

          <div *ngIf="!banderaTipoEntrega" class="form-group col-lg-6">
            <label>* RUC</label>
            <input #Ruc="ngModel" [(ngModel)]="this.DatosDireccion.Id_Agente"
                   [ngClass]="{'is-invalid': Ruc.invalid && (Ruc.dirty || Ruc.touched)}"
                   [pattern]='this.soloNumerosPattern'
                   class="tamanioInputs form-control" maxlength="13"
                   minlength="13" name="ruc" placeholder="" type="text" required>
            <div *ngIf="Ruc.invalid && (Ruc.dirty || Ruc.touched)">
              <div *ngIf="Ruc.errors.required">
                <p class="alert alert-danger"> &nbsp; <i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Campo requerido.</p>
              </div>
              <div *ngIf="Ruc.errors.minlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Mínimo 13 digitos.</p>
              </div>
              <div *ngIf="Ruc.errors.maxlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Máximo 13 digitos.</p>
              </div>
              <div *ngIf="Ruc.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Use solo números.</p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 form-group">
            <label>* Celular / Convencional</label>
            <input #Telefono="ngModel"
                   [(ngModel)]="this.DatosDireccion.Telefono"
                   [ngClass]="{'is-invalid': Telefono.invalid && (Telefono.dirty || Telefono.touched)}"
                   [pattern]='this.soloNumerosPattern' class="tamanioInputs form-control" name="telefono"
                   type="tel" required>
            <div *ngIf="Telefono.invalid && (Telefono.dirty|| Telefono.touched) ">
              <div *ngIf="Telefono.errors.required">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Campo requerido.</p>
              </div>
              <div *ngIf="Telefono.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Utilice solo números.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label>* Provincia</label>
          <select #Provincia="ngModel"
                  (change)="getDpaCiudades($event.target.value)"
                  [(ngModel)]="this.provinciaDireccion"
                  [ngClass]="{'errorSelect': Provincia.invalid && (Provincia.dirty || Provincia.touched)}"
                  class="tamanioInputs form-control" data-size="4" name="provincia" required>
            <option *ngFor="let provincia of this.provinciasDireccion"
                    value="{{provincia.COD_DPA}}"> {{provincia.NOMBRE }}</option>
          </select>
          <div *ngIf="Provincia.invalid && (Provincia.touched||Provincia.dirty)">
            <div *ngIf="Provincia.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                Campo requerido</p>
            </div>
          </div>
        </div>

        <div class="form-group col-md-6">
          <label>* Ciudad</label>
          <select [disabled]="!this.activarSelectDireccion" [ngClass]="{'select_ciudad': select_ciudad}"
                  (change)="seleccionarCiudad($event.target.value)"
                  #Ciudad="ngModel" [(ngModel)]="this.ciudadDireccion"
                  [ngClass]="{
          'errorSelect': Ciudad.invalid && (Ciudad.dirty || Ciudad.touched)}"
                  class="tamanioInputs form-control" name="ciudad" required>
            <option selected value="">Seleccione ..</option>
            <option *ngFor="let ciudad of this.ciudadesDireccion"
                    value="{{ciudad.COD_DPA}} "> {{ciudad.NOMBRE }}</option>
          </select>
          <div *ngIf="Ciudad.invalid && (Ciudad.touched||Ciudad.dirty)">
            <div *ngIf="Ciudad.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                Campo requerido.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>* Calle Principal</label>
        <input #CallePrincipal="ngModel"
               [(ngModel)]="this.DatosDireccion.Calle_Principal_Agente"
               [ngClass]="{'is-invalid': CallePrincipal.invalid && (CallePrincipal.dirty || CallePrincipal.touched)}"
               class="tamanioInputs form-control"
               name="callePrincipal" placeholder="" id="CallePrincipal" required>
        <div *ngIf="CallePrincipal.invalid && (CallePrincipal.touched||CallePrincipal.dirty)">
          <div *ngIf="CallePrincipal.errors.required">
            <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
              Campo requerido.</p>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>* Calle Secundaria</label>
        <input #CalleSecundaria="ngModel"
               [(ngModel)]="this.DatosDireccion.Calle_Secundaria_Agente"
               [ngClass]="{'is-invalid': CalleSecundaria.invalid && (CalleSecundaria.dirty || CalleSecundaria.touched)}"
               class="tamanioInputs form-control"
               name="calleSecundaria" placeholder="" id="calleSecundaria" required>
        <div *ngIf="CalleSecundaria.invalid && (CalleSecundaria.touched||CalleSecundaria.dirty)">
          <div *ngIf="CalleSecundaria.errors.required">
            <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
              Campo requerido.</p>
          </div>

        </div>
      </div>

      <div class="form-row">
        <div class="col-lg-6 form-group">
          <label>Número de referencia</label>
          <input #NumCasaAgente="ngModel"
                 [(ngModel)]="this.DatosDireccion.Num_Casa_Agente" class="tamanioInputs form-control"
                 name="numCasaAgente" placeholder="" type="text">
          <div>
          </div>
        </div>
        <div class=" col-lg-6 form-group">
          <label>Código Postal</label>
          <input #CodigoPostal="ngModel"
                 [(ngModel)]="this.DatosDireccion.Num_Cod_Postal" class="tamanioInputs form-control"
                 name="codigoPostal" type="text">
        </div>
      </div>

      <div class="text-right mb-3">
        <button (click)="guardarDireccionNueva()" type="button" class="btn btn-outline-primary">Guardar</button>
      </div>
    </form>
  </div>

  <div *ngIf="this.datosfacturacionDiferente" class="modal-body px-0 pt-2">
    <button class="px-3" (click)="habilitarDireccionDiferente('Factura')"><label class="nuevaDireccionFactura"> <a
      class="text-primary p-0"><i class="fas fa-chevron-left"></i>&nbsp;&nbsp;Regresar</a></label></button>

    <div class="form-row px-5" *ngIf="this.informacionCompra?.DATOS_FACTURA.IDENTIFICACION_FACTURA != null">
      <div class="form-group col-auto mb-0">
        <div>
          <label class="text-center">Actual</label>
        </div>
      </div>

      <div class="form-group col-auto mb-0">
        <label class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.NOMBRE_FACTURA }}
          ({{this.informacionCompra?.DATOS_FACTURA.IDENTIFICACION_FACTURA}})</label>
        <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.CORREO}}</p>
        <p class="text-justify mb-0">{{this.informacionCompra?.DATOS_FACTURA.TELEFONO_FACTURA}}</p>
        <p class="text-justify mb-1">{{this.informacionCompra?.DATOS_FACTURA.DIRECCION_FACTURA}}</p>
      </div>
    </div>

    <form #FormActualizarDatosFacturacion id="formActualizarDatosFacturacion" name="formActualizarDatosFacturacion"
          class="validate-form px-5" validate-form>
      <br>
      <label class="font-weight-bold">Datos para facturación</label>

      <div class="form-row">
        <div class=" col-md-6 form-group">
          <label>Tipo de persona</label>
          <select (change)="cambiarTipo($event.target.value)" type="text" class="form-control tamanioInputs">
            <option [selected]="banderaTipo" value="Persona">Persona Natural</option>
            <option [selected]="!banderaTipo" value="Empresa">Empresa</option>
          </select>
        </div>
        <div *ngIf="banderaTipo" class="col-md-6 form-group">
          <label>* Nombres y Apellidos</label>
          <input #NombreAFactura="ngModel" style="text-transform: uppercase;"
                 [(ngModel)]="this.DatosFactura.Nombre"
                 [ngClass]="{'is-invalid': (NombreAFactura.invalid && (NombreAFactura.dirty || NombreAFactura.touched))}"
                 [pattern]='this.soloLetrasPattern'
                 class="tamanioInputs form-control " name="nombreAFactura" placeholder="" required
                 type="text"> <!--form-control-sm-->
          <div *ngIf="NombreAFactura.invalid && (NombreAFactura.dirty || NombreAFactura.touched)">
            <div *ngIf="NombreAFactura.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo requerido.</p>
            </div>
            <div *ngIf="NombreAFactura.errors.pattern">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                Utilice solo letras.</p>
            </div>
          </div>
        </div>

        <div *ngIf="!banderaTipo" class=" col form-group">
          <label>* Razon Social</label>
          <input #Razon_Social_Factura="ngModel" style="text-transform: uppercase;"
                 [(ngModel)]="this.DatosFactura.Nombre"
                 [ngClass]="{'is-invalid': Razon_Social_Factura.invalid && (Razon_Social_Factura.dirty || Razon_Social_Factura.touched)}"
                 [pattern]='this.LetrasNumerosPattern'
                 class="tamanioInputs form-control" name="razon_Social_Factura" placeholder=""
                 required type="text">
          <div *ngIf="Razon_Social_Factura.invalid && (Razon_Social_Factura.dirty || Razon_Social_Factura.touched)">
            <div *ngIf="Razon_Social_Factura.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo requerido.</p>
            </div>
            <div *ngIf="Razon_Social_Factura.errors.pattern">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Utilice solo letras y
                numeros.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>* Correo electrónico</label>

        <input #EmailFactura="ngModel" [(ngModel)]="this.DatosFactura.Correo" style="text-transform: lowercase"
               [ngClass]="{'is-invalid': EmailFactura.invalid && (EmailFactura.dirty || EmailFactura.touched)}"
               [pattern]='this.emailPattern'
               class="form-control tamanioInputs"
               name="emailFactura" placeholder="" type="email" required>
        <div *ngIf="EmailFactura.invalid && (EmailFactura.touched||EmailFactura.dirty)">
          <div *ngIf="EmailFactura.errors.required">
            <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
              Campo requerido.</p>
          </div>
          <div *ngIf="EmailFactura.errors.pattern">
            <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
              Debe cumplir con el formato</p>
          </div>
        </div>
      </div>

      <div class="form-group">

        <div class="form-row">
          <div *ngIf="banderaTipo" class="form-group col-lg-6">
            <label>* Cédula</label>
            <input #CedulaFactura="ngModel"
                   [(ngModel)]="this.DatosFactura.Id_Agente"
                   [ngClass]="{'is-invalid': CedulaFactura.invalid && (CedulaFactura.dirty || CedulaFactura.touched)}"
                   [pattern]='this.soloNumerosPattern'
                   class="tamanioInputs form-control" maxlength="10"
                   minlength="10" name="cedulaFactura" placeholder=""
                   type="text" required>
            <div *ngIf="CedulaFactura.invalid && (CedulaFactura.dirty || CedulaFactura.touched)">
              <div *ngIf="CedulaFactura.errors.required">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp; Campo
                  requerido.</p>
              </div>
              <div *ngIf="CedulaFactura.errors.minlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Minimo 10 digitos.</p>
              </div>
              <div *ngIf="CedulaFactura.errors.maxlength">
                <p class="alert alert-danger"> &nbsp; <i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Maximo 10 digitos.</p>
              </div>
              <div *ngIf="CedulaFactura.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Utilice solo numeros. </p>

              </div>
            </div>
          </div>

          <div *ngIf="!banderaTipo" class="form-group col-lg-6">
            <label>* RUC</label>
            <input #RucFactura="ngModel" [(ngModel)]="this.DatosFactura.Id_Agente"
                   [ngClass]="{'is-invalid': RucFactura.invalid && (RucFactura.dirty || RucFactura.touched)}"
                   [pattern]='this.soloNumerosPattern'
                   class="tamanioInputs form-control" maxlength="13"
                   minlength="13" name="rucFactura" placeholder="" type="text" required>
            <div *ngIf="RucFactura.invalid && (RucFactura.dirty || RucFactura.touched)">
              <div *ngIf="RucFactura.errors.required">
                <p class="alert alert-danger"> &nbsp; <i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Campo requerido.</p>
              </div>
              <div *ngIf="RucFactura.errors.minlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Mínimo 13 digitos.</p>

              </div>
              <div *ngIf="RucFactura.errors.maxlength">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Máximo 13 digitos.</p>
              </div>
              <div *ngIf="RucFactura.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Use solo números.</p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 form-group col-lg-6">
            <label>* Celular / Convencional</label>
            <input #TelefonoFactura="ngModel"
                   [(ngModel)]="this.DatosFactura.Telefono"
                   [ngClass]="{'is-invalid': TelefonoFactura.invalid && (TelefonoFactura.dirty || TelefonoFactura.touched)}"
                   [pattern]='this.soloNumerosPattern' class="tamanioInputs form-control" name="telefonoFactura"
                   type="tel" required>
            <div *ngIf="TelefonoFactura.invalid && (TelefonoFactura.dirty|| TelefonoFactura.touched) ">
              <div *ngIf="TelefonoFactura.errors.required">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Campo requerido.</p>
              </div>

              <div *ngIf="TelefonoFactura.errors.pattern">
                <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                  Utilice solo números.</p>
              </div>
            </div>
          </div>

        </div>
        <div class="form-group">
          <label>* Dirección</label>
          <input #CallePrincipalFactura="ngModel"
                 [(ngModel)]="this.DatosFactura.Calle_Principal_Agente"
                 [ngClass]="{'is-invalid': CallePrincipalFactura.invalid && (CallePrincipalFactura.dirty || CallePrincipalFactura.touched)}"
                 class="tamanioInputs form-control"
                 name="callePrincipalFactura" placeholder="" id="callePrincipalFactura" required>
          <div *ngIf="CallePrincipalFactura.invalid && (CallePrincipalFactura.touched||CallePrincipalFactura.dirty)">
            <div *ngIf="CallePrincipalFactura.errors.required">
              <p class="alert alert-danger"><i class='fa fa-exclamation-circle'> </i> &nbsp;
                Campo requerido.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="text-right mb-3">
        <button (click)="guardarFacturacionNueva()" type="button" class="btn btn-outline-primary">Guardar</button>
      </div>
    </form>

  </div>

  <div *ngIf="(!this.direccionEnvioDiferente && !this.datosfacturacionDiferente && !this.siguienteDetallePedido)"
       class="text-right mb-3 mr-3">
    <button type="button" class="btn btn-primary mr-1" aria-label="Close"
            (click)="modal.dismiss('Cross click'); cerrar()">
      Cancelar
    </button>
    <button (click)="this.siguienteProcesoCompra()" type="button"
            class="btn btn-outline-primary ml-1">Siguiente
    </button>
  </div>

  <div *ngIf="this.siguienteDetallePedido" class="modal-body px-0 pt-2">
    <form #FormDetalleCompra id="formDetalleCompra" name="formDetalleCompra"
          class="validate-form px-5" validate-form>
      <h5 class="text-center">Información del pedido</h5>
      <div class="card card-body">

        <div *ngIf="this.informacionCompra.METODO_ENVIO_COMPRA == 'Acordar'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Envío</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row">
              <div class="form-group col-12 mb-0">
                <label class="my-0 text-justify">Usted podrá acordar con el vendedor sobre el proceso de envío de su
                  compra,
                  de acuerdo a su necesidad a través de WhatsApp.</label>
                <div class="form-row">
                  <div class="form-group col-12 mb-0">
                    <div class="template-demo">
                      <button type="button" class="btn btn-social-icon btn-whatsapp btn-rounded">
                        <i class="fab fa-whatsapp fa-1x"></i>
                      </button>
                      <a
                        href="https://api.whatsapp.com/send?phone={{contactoWhatsapp}}&text=Hola!%20Quiero%20conocer%20acerca%20de%20su%20tienda!"
                        target="_blank"> {{this.productoDetalle.TIENDA.CONTACTO_WHATSAPP}}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="this.informacionCompra.METODO_ENVIO_COMPRA == 'Retiro'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Envío</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row ">
              <div class="form-group col-12 mb-0">
                <label class="mb-3 text-justify">Recuerde la siguiente información al momento de retirar su compra en
                  la tienda.</label>
                <div class="card card-body ">
                  <p class=" text-justify" *ngIf="this.hora_estimada_retiro == '1hora'">Su pedido estará listo
                    aproximadamente en 1 hora.</p>
                  <p class=" text-justify" *ngIf="this.hora_estimada_retiro == '4horas'">Su pedido estará listo
                    aproximadamente en 4 horas.</p>
                  <p class=" text-justify" *ngIf="this.hora_estimada_retiro == '24horas'">Su pedido estará listo
                    aproximadamente en 24 horas.</p>
                  <p class=" text-justify" *ngIf="this.hora_estimada_retiro == '4dias'">Su pedido estará listo
                    aproximadamente en 4 días.</p>
                  <p class=" text-justify" *ngIf="this.hora_estimada_retiro == '5dias'">Su pedido estará listo de 5 o
                    más días.</p>
                  <p class=" text-justify">{{this.instruccion_retiro}}</p>
                </div>
                <label class=" mt-3 text-justify">Puede contactarnos a través de nuestro WhatsApp para información
                  sobre su pedido.</label>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-12 mb-0">
                <div class="template-demo">
                  <button type="button" class="btn btn-social-icon btn-whatsapp btn-rounded">
                    <i class="fab fa-whatsapp fa-1x"></i>
                  </button>
                  <a
                    href="https://api.whatsapp.com/send?phone={{contactoWhatsapp}}&text=Hola!%20Quiero%20conocer%20acerca%20de%20su%20tienda!"
                    target="_blank"> {{this.productoDetalle.TIENDA.CONTACTO_WHATSAPP}}</a>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="this.informacionCompra.METODO_ENVIO_COMPRA == 'Domicilio'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Envío</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row">
              <div class="form-group col-12 mb-0">
                <label class="my-0 text-justify">Usted a seleccionado el envío a domicilio, el costo de envío se ha
                  recargado a su pedido.
                  para información contactanos a través de WhatsApp.</label>
                <div class="form-row">
                  <div class="form-group col-12 mb-0">
                    <div class="template-demo">
                      <button type="button" class="btn btn-social-icon btn-whatsapp btn-rounded">
                        <i class="fab fa-whatsapp fa-1x"></i>
                      </button>
                      <a
                        href="https://api.whatsapp.com/send?phone={{contactoWhatsapp}}&text=Hola!%20Quiero%20conocer%20acerca%20de%20su%20tienda!"
                        target="_blank"> {{this.productoDetalle.TIENDA.CONTACTO_WHATSAPP}}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr>

        <div *ngIf="this.informacionCompra.METODO_PAGO_COMPRA == 'Efectivo'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Pago</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row">
              <div class="form-group col-12 mb-0">
                <label class="my-0 text-justify">Al momento de la entrega se deberá realizar la cancelación total del
                  pedido.</label>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="this.informacionCompra.METODO_PAGO_COMPRA == 'Transferencia'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Pago</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row">
              <div class="form-group col-12 mb-0">
                <div class="box">

                  <div class="box-title mb-1 text-center">
                    <label class="my-0 text-center">Datos para la transferencia bancaria</label>
                  </div>
                  <p class=" iconos-pagos "><img src="assets/images/icon-transferencia.png"
                                                 alt="..."></p>
                  <div class="box-text mt-2 text-md-left text-center">
                    <div class="row justify-content-center mx-auto">
                      <p class="card-text col-md-5 mb-0 font-weight-bold">Banco:</p>
                      <p class="col-md-6 mb-0">{{this.Banco_Pertenece}}</p>
                      <p class="card-text col-md-5 mb-0 font-weight-bold">Tipo:</p>
                      <p class="col-md-6 mb-0">{{this.Tipo_Cuenta}}</p>
                      <p class="card-text col-md-5  mb-0 font-weight-bold">#Cuenta:</p>
                      <p class="col-md-6 mb-0">{{this.Numero_cuenta}}</p>
                    </div>

                  </div>

                </div>
                <div class="alert alert-warning text-justify" role="alert">
                  Asegúrate de poner el código de compra que recibiras al finalizar la compra en el comentario o
                  motivo de la transaferencia bancaria
                </div>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="this.informacionCompra.METODO_PAGO_COMPRA == 'Electrónico'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Método de Pago</label>
          </div>
          <div class="form-group col-sm-9 col-md-8">
            <div class="form-row ">
              <div class="form-group col-md-10 mb-0 ">

                <label>Has escogido pagar a través de PayPal, podrás realizar el pago con tu
                  cuenta PayPal o con una tarjeta de crédito o Débito</label>
              </div>

            </div>
          </div>

        </div>

        <hr>
        <div *ngIf="this.informacionCompra.METODO_PAGO_COMPRA == 'Electrónico'" class="form-row">
          <div class="form-group col-sm-3 col-md-4 mb-0">
            <label class="font-weight-bold">Pagar ahora</label>
          </div>
          <div class="col-sm-9 col-md-8 ">
            <div class="form-row ">
              <div class="form-group col-md-10 mb-0 ">
                <div class="w-75 ">
                  <ngx-paypal [config]="payPalConfig"></ngx-paypal>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </form>

  </div>

  <div *ngIf="this.siguienteDetallePedido" class="text-right mb-3 mr-3">
    <button type="button" class="btn btn-primary mr-1" (click)="atras()">Atras</button>
    <button *ngIf="this.informacionCompra.METODO_PAGO_COMPRA != 'Electrónico'" type="button"
            class="btn btn-outline-primary ml-1" [disabled]="loading" (click)="comprar()">Realizar Compra
    </button>
  </div>


</ng-template>
<!-- ============================ COMPONENT MODAL  .//END ========================= -->


<!-- ========================= SECTION FRANJA AZUL ========================= -->
<section>
  <nav class=" stick-top navbar navbar-main navbar-expand-md  border-bottom colorNavbar mx-0">
    <div class="mx-lg-auto">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main_nav" #btnBarra
              aria-controls="main_nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="fa fa-bars" style="color: white"></span>
      </button>

      <div class="collapse navbar-collapse " id="main_nav">
        <ul class="navbar-nav ">
          <li class="nav-item dropdown">
            <a class=" categoriaCelular nav-link pl-0" data-toggle="dropdown" href="#" aria-expanded="false"> &nbsp;Categorías
              <span
                class="fa fa-caret-down"></span></a>

            <a class="categoriaNormal nav-link pl-0 text-white" style="cursor: pointer" (click)="bandera=!bandera"> <span
              class="fa fa-bars"></span> &nbsp;Categorías</a>

            <div class="dropdown-menu " style="height: 300px; overflow: auto">
              <div class="row px-3">
                <div class="col-12 " *ngFor="let c11 of c1; let i = index">

                  <p class=" iconos-pagos mx-auto "><span class="{{this.vectorIconos[i]}} fa-2x"
                                                          style="color: #2a4c75"></span></p>
                  <h5 class="mb-3  text-center my-1" style="font-weight: bold">{{c11.NOMBRE}}</h5>
                  <div *ngFor="let c22 of c2">
                    <div class="" *ngIf="c11.ID_CATEGORIA==c22.CAT_ID_CATEGORIA">
                      <p  (click)="verificar(c22.ID_CATEGORIA,c22.NOMBRE);btnBarra.click() " style="color: black; ">{{c22.NOMBRE}}</p>

                      <div *ngFor="let c33 of c3">
                        <div class=""
                             *ngIf=" (c11.ID_CATEGORIA==c22.CAT_ID_CATEGORIA) && (c22.ID_CATEGORIA==c33.CAT_ID_CATEGORIA)">
                          <p (click)="verificar(c33.ID_CATEGORIA, c33.NOMBRE);btnBarra.click()" style="font-size: smaller">{{c33.NOMBRE}}</p>
                        </div>
                      </div>

                    </div>
                  </div>


                  <hr>
                </div>
              </div>

              <div class="dropdown-divider"></div>
              <a class="dropdown-item col-2" [routerLink]="['/principales/menu/categorias']">Ver todas</a>
            </div>
          </li>

          <li class="nav-item">
            <a class="nav-link" (click)="vender()" style="color: white; cursor: pointer">Vende con nosotros</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Ayuda</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Historial</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Quienes somos</a>
          </li>

        </ul>
      </div> <!-- collapse .// -->
    </div> <!-- container .// -->
  </nav>
</section>
<!-- ========================= SECTION FRANJA AZUL END ========================= -->
<section class="bg wrapper">
<nav id="sidebar" class="scrollbar2  bg-white " [ngClass]="{'active':bandera}">

  <div class="px-4 py-2" *ngFor="let c11 of c1; let i = index">

    <p class=" iconos-pagos mx-auto "><span class="{{this.vectorIconos[i]}} fa-2x" style="color: #2a4c75"></span>
    </p>
    <h5 class="mb-3  text-center my-1" style="font-weight: bold">{{c11.NOMBRE}}</h5>


    <div *ngFor="let c22 of c2">
      <div class="" *ngIf="c11.ID_CATEGORIA==c22.CAT_ID_CATEGORIA">
        <li class="btn btn-link" style="color: black; "
            (click)="verificar(c22.ID_CATEGORIA, c22.NOMBRE)">{{c22.NOMBRE}}</li>

        <div *ngFor="let c33 of c3" class="mb-3">
          <div *ngIf=" (c11.ID_CATEGORIA==c22.CAT_ID_CATEGORIA) && (c22.ID_CATEGORIA==c33.CAT_ID_CATEGORIA)">
            <li class="btn btn-link ml-3" (click)="verificar(c33.ID_CATEGORIA, c33.NOMBRE)"
                style="font-size: smaller">{{c33.NOMBRE}}</li>
          </div>
        </div>

      </div>
    </div>


    <hr>
  </div>


</nav>

<body class="bg w-100" >
<form #FormDetalleProducto id="formDetalleProducto" name="formDetalleProducto">
  <!-- ============================ COMPONENT 1 ================================= -->
  <section class="section-content padding-y-sm">
    <div class="container">
      <div class="card">
        <div class="row no-gutters">
          <aside class="col-lg-7 col-md-7">

            <article class="gallery-wrap">
              <div class="img-big-wrap ">
                <a>
                  <img *ngIf="this.imagenPrincipal != null" [src]="this.imagenPrincipal">
                  <iframe *ngIf="this.imagenPrincipal == null" width="100%" height="380"
                          [src]="this.videoYoutube" frameborder="0"
                          allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                          allowfullscreen></iframe>
                  <video *ngIf="this.imagenPrincipal==null && this.videoYoutube == null && data.video!=null"
                         class="video-carga" controls
                         height="auto" width="auto">
                    <source [src]="data.video" type="{{ data.type }}">
                  </video>
                </a>

              </div> <!-- img-big-wrap.// -->
              <div class="thumbs-wrap">
                <a *ngFor="let imagen of this.varianteActiva.IMAGENES">
                  <div class="item-thumb" *ngIf="imagen.TIPO_IMAGEN != 'youtube' && imagen.TIPO_IMAGEN != 'video'">
                    <img (click)="asignarImgPrincipal(imagen.IMAGEN)" [src]="getImagen(imagen.IMAGEN)">
                  </div>
                  <div class="item-thumb" *ngIf="imagen.TIPO_IMAGEN == 'youtube'">
                    <button (click)="this.imagenPrincipal = null" class="clvideo"><i class="fab fa-youtube fa-3x"
                                                                                     aria-hidden="true"></i></button>
                  </div>
                  <div class="item-thumb" *ngIf="imagen.TIPO_IMAGEN == 'video'">
                    <button (click)="this.imagenPrincipal = null" class="clvideo"><i class="fab fa-video fa-3x"
                                                                                     aria-hidden="true"></i></button>
                  </div>
                </a>
              </div> <!-- thumbs-wrap.// -->
            </article>  <!--gallery-wrap .end//-->
          </aside>
          <main class="col-lg-5 col-md-5 border-left">
            <article class="content-body px-4 pt-2">
              <p class="mb-0 text-center mb-2">
                <a
                  routerLink="../../detalle-tienda/tienda/{{this.productoDetalle?.TIENDA.NUM_TIENDA}}/inicio-tienda"
                  class="title tituloTienda text-primary p-0"> {{this.productoDetalle?.TIENDA.NOMBRE_COMERCIAL}}</a>
              </p>

              <div class="form-row justify-content-center text-center">

                <label class=" m-0 col-md-4 "><strong>{{this.productoDetalle?.PRODUCTO.CONDICION}}</strong></label>
                <div class="rating-wrap mb-0 col-md-4">

                  <div class="row no-gutters justify-content-center">
                    <h3
                      class=" text-center col-auto mr-2">{{this.productoDetalle?.PRODUCTO.CALIFICACIONs[0]?.PROMEDIO_CAL | number}}</h3>

                    <ul class="rating-stars col-auto">

                      <ngb-rating *ngIf="this.productoDetalle?.PRODUCTO.CALIFICACIONs.length != 0"
                                  [(rate)]="this.productoDetalle?.PRODUCTO.CALIFICACIONs[0].PROMEDIO_CAL">
                        <ng-template let-fill="fill">
                          <span class="star" [class.filled]="fill === 100">&#9733;</span>
                        </ng-template>
                      </ngb-rating>

                      <ngb-rating *ngIf="this.productoDetalle?.PRODUCTO.CALIFICACIONs.length == 0"
                                  [(rate)]="currentRate">
                        <ng-template let-fill="fill">
                          <span class="star" [class.filled]="fill === 100">&#9733;</span>
                        </ng-template>
                      </ngb-rating>

                    </ul>
                  </div>
                </div>
                <div class="col-md-4">
                <span *ngIf="this.productoDetalle?.PRODUCTO.COMENTARIOs.length > 0"
                      class="label-rating text-muted">{{this.productoDetalle?.PRODUCTO.COMENTARIOs.length}}
                  comentarios</span>

                  <span *ngIf="this.productoDetalle?.PRODUCTO.COMENTARIOs.length == 0" class="label-rating text-muted">0 Comentarios </span>
                </div>
              </div> <!-- rating-wrap.// -->

              <hr class="mt-2">

              <div class="mt-2">
                <h3 class="title m-0  mb-2">{{this.productoDetalle?.PRODUCTO.NOMBRE_PRODUCTO}}</h3>
              </div>

              <div class="my-3">
                <var
                  *ngIf="this.banderaNoDisponible == false && this.varianteActiva?.STOCK != 0 && !this.banderaActivarDescuentoAutomatico"
                  class="price h3">{{this.varianteActiva?.PRECIO_UNITARIO_CON_IVA | currency}}</var>

                <var *ngIf="this.banderaActivarDescuentoAutomatico" class="price h3">
                  {{this.varianteActiva.PRECIO_UNITARIO_CON_IVA_DESCUENTO | currency}}
                </var>
                <del *ngIf="this.banderaActivarDescuentoAutomatico" class="price-old">
                  {{this.varianteActiva?.PRECIO_UNITARIO_CON_IVA | currency}}
                </del>

                <var *ngIf="this.banderaNoDisponible == true" class="text-danger h5">No disponible</var>
                <var *ngIf="this.banderaNoDisponible == false && this.varianteActiva.STOCK == 0"
                     class="text-success h5">
                  Agotado
                </var>
              </div>

              <article class="gallery-wrap">
                <div *ngIf="this.existeColor == true">
                  <div class="thumbs-wrap">
                    <div class="item-thumbDetalle" *ngFor="let color of this.arrayColor"
                         [ngClass]="{'item-Activo':color==this.varianteActiva.COLOR}">
                      <button id="btnValueColor+{{color}}" (click)="this.asignarColor(color)" class="item-opciones"
                              [style.background-color]="color"></button>
                    </div>
                  </div> <!-- thumbs-wrap.// -->
                </div>
                <div class="fontTamano">
                  <dl class="row mb-3">
                    <dt class="col-sm-3 col-4">Marca</dt>
                    <dd class="col-sm-9 col-8 mb-2">{{this.productoDetalle?.PRODUCTO.MARCA}}</dd>

                    <dt *ngIf="this.existeTalla == true" class="col-sm-3 col-4 mt-2">Talla</dt>
                    <dd *ngIf="this.existeTalla == true" class="col-sm-9 col-8">

                      <div class="form-group col-lg-6 col-md-6 col-10 my-2 p-0">
                        <select (change)="this.verificarVariante()" class=" tamanioInputs form-control form-control-sm"
                                data-size="4"
                                name="tallaSelect" id="tallaSelect">
                          <option *ngFor="let talla of this.arrayTalla"
                                  [selected]="talla == this.varianteActiva.TALLA"
                                  value="{{talla}}">{{talla}}</option>
                        </select>
                      </div>

                    </dd>

                    <dt *ngIf="this.existeMaterial == true" class="col-sm-3 col-4 mt-2">Material</dt>
                    <dd *ngIf="this.existeMaterial == true" class="col-sm-9 col-8">

                      <div class="form-group col-lg-6 col-md-6 col-10 my-2 p-0">
                        <select (change)="this.verificarVariante()" class="tamanioInputs form-control form-control-sm"
                                data-size="4"
                                name="materialSelect" id="materialSelect">
                          <option *ngFor="let material of this.arrayMaterial"
                                  [selected]="material == this.varianteActiva.MATERIAL"
                                  value="{{material}}">{{material}}</option>
                        </select>
                      </div>
                    </dd>

                    <dt class="col-sm-3 col-4 mt-4">Cantidad <a class="m-0 pt-0 text-center"
                                                                style="font-size: 11px">({{this.varianteActiva.MEDIDA}}
                      )</a></dt>

                    <dd class="col-sm-9 col-8">
                      <div class="form-group form-control-sm col-lg-6 col-md-6 col-10 my-2 p-0">

                        <div class="input-group input-spinner mt-4">
                          <div class="input-group-prepend">
                            <button
                              [disabled]="this.banderaNoDisponible || (this.banderaNoDisponible == false && this.varianteActiva.STOCK == 0)"
                              (click)="this.decrementar()" class="btn btn-light  tamanioInputs m-0 px-1"
                              style="border-color: darkgray" type="button"
                              id="button-plus"> -
                            </button>
                          </div>
                          <input type="number" disabled [(ngModel)]="this.varianteActiva.CANTIDAD"
                                 class="form-control tamanioInputs m-0"
                                 style="border-color: darkgray; background-color: white" value="1"
                                 name="cantidadProducto">
                          <div class="input-group-append">
                            <button
                              [disabled]="this.banderaNoDisponible || (this.banderaNoDisponible == false && this.varianteActiva.STOCK == 0)"
                              (click)="this.incrementar()" class="btn btn-light tamanioInputs m-0 px-1"
                              style="border-color: darkgray" type="button"
                              id="button-minus"> +
                            </button>
                          </div>
                        </div> <!-- input-group.// -->

                      </div>
                    </dd>
                  </dl>
                </div>
              </article> <!-- gallery-wrap .end// -->


              <div class="form-row justify-content-around mt-md-2">
                <div class="form-group col-md-7 col-12 mb-md-0 mb-2">
                  <button (click)="this.abrirModalFinalizarPedido(contentPedido)"
                          [disabled]="this.banderaNoDisponible || (this.banderaNoDisponible == false && this.varianteActiva.STOCK == 0)"
                          class="btn btn-primary col-12 mt-md-0 mt-2"> Comprar
                  </button>
                </div><!--form-group end.-->
                <div class="form-group col-md-5 col-12 mb-0">
                  <button (click)="agregarCarrito()"
                          [disabled]="this.banderaNoDisponible || (this.banderaNoDisponible == false && this.varianteActiva.STOCK == 0)"
                          class="btn btn-outline-primary col-12">
                    <span class="text">Agregar al carrito</span>
                    <i class="fas fa-shopping-cart"></i>
                  </button>
                </div><!--form-group end.-->

              </div><!--form-row.-->
            </article> <!-- product-info-aside .// -->
          </main> <!-- col.// -->
        </div> <!-- row.// -->
      </div> <!-- card.// -->
    </div> <!-- container.// -->
  </section>
  <!-- ============================ COMPONENT 1 END .// ================================= -->

  <!-- ============================ COMPONENT SECCION INFORMACION  ================================= -->
  <section class="section-content padding-y-sm pt-0">
    <div class="container">

      <ngb-tabset [destroyOnHide]="false">
        <ngb-tab title="Información">
          <ng-template ngbTabContent>
            <article class="card">
              <div class="card-body">
                <h5>Descripción del producto</h5>
                <p class=" text-justify">
                  {{this.productoDetalle?.PRODUCTO.DESCRIPCION_PRODUCTO}}
                </p>
                <hr>
                <div class="row">
                  <aside class="col">
                    <h5>Información adicional</h5>
                    <dl class="row">
                      <dt class="col-sm-3 col-4">Código:</dt>
                      <dd class="col-sm-9 col-8"> {{this.productoDetalle?.PRODUCTO.COD_PRODUCTO}}</dd>

                      <dt class="col-sm-3 col-4">Peso:</dt>
                      <dd class="col-sm-9 col-8"> {{this.productoDetalle?.PRODUCTO.PESO_PRODUCTO}}</dd>

                      <dt class="col-sm-3 col-4">Garantía:</dt>
                      <dd class="col-sm-9 col-8"> {{this.productoDetalle?.GARANTIA}}</dd>
                    </dl>
                  </aside>
                </div> <!-- row.// -->
                <hr>

                <h5>Detalle del producto</h5>
                <div [innerHTML]=this.productoDetalle?.PRODUCTO.DETALLE_PRODUCTO></div>

              </div> <!-- card-body.// -->
            </article> <!-- card.// -->
          </ng-template>
        </ngb-tab>

        <ngb-tab>
          <ng-template ngbTabTitle>Envíos y pagos</ng-template>
          <ng-template ngbTabContent>

            <article class="card">
              <div id="cardMetodosEnvioInformacion">
                <div class="row justify-content-center ">
                  <h4 class="card-title text-center mt-3">Opciones de Pago</h4>

                </div>
                <p class="text-center px-2">Contamos con varios métodos de pago para facilitar la compra de tus
                  productos,
                  al momento de realizar la
                  transacción.</p>

                <div class="social-box"
                     *ngIf="this.objTransferencia.Tipo_Pago!=null || this.objEfectivo.Tipo_Pago!=null || this.objElectronico.Tipo_Pago!=null">
                  <div class="container">
                    <div class="row justify-content-center">

                      <div class="col-lg-4 col-xs-12  text-center" *ngIf="this.objEfectivo.Tipo_Pago!=null">
                        <div class="box py-2">
                          <div class="box-title mb-2">
                            <h5>Efectivo</h5>
                          </div>
                          <p class=" iconos-pagos "><img src="assets/images/icon-efectivo.png" alt="..."></p>
                          <div class="box-text">
                            <span>Usted puede pagar con efectivo en nuestra tienda, realiza la compra en la plataforma y puedes pagarlo al momento de la entrega.</span>
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-4 col-xs-12  text-center" *ngIf="this.objTransferencia.Tipo_Pago!=null">
                        <div class="box py-2">
                          <div class="box-title mb-2">
                            <h5>Transferencia bancaria</h5>
                          </div>
                          <p class=" iconos-pagos "><img src="assets/images/icon-transferencia.png" alt="..."></p>
                          <div class="box-text">
                            <span>Usted puede pagar con transferencia bancaria luego de realizar la compra en la plataforma.</span>
                            <hr>
                            <div class="row justify-content-center mx-auto">
                              <p class="card-text col-5 ">Banco:</p>
                              <p class="col-6 ">{{this.objTransferencia.Banco_Pertenece}}</p>
                              <p class="card-text col-5 ">Tipo:</p>
                              <p class="col-6 ">{{this.objTransferencia.Tipo_Cuenta}}</p>
                              <p class="card-text col-5  ">#Cuenta:</p>
                              <p class="col-6 ">{{this.objTransferencia.Numero_cuenta}}</p>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-lg-4 col-xs-12  text-center" *ngIf="this.objElectronico.Tipo_Pago!=null">
                        <div class="box py-2">
                          <div class="box-title mb-2">
                            <h5>Electrónico</h5>
                          </div>
                          <p class=" iconos-pagos "><img src="assets/images/icon-electronico.png" alt="..."></p>
                          <div class="box-text">
                            <span>Usted puede pagar todas sus compras a traves de la plataforma Paypal de manera rápida y segura.</span>
                          </div>
                          <div class="box-btn text-primary">
                            <a>Porcentaje de recargo:  {{objElectronico.Recargo}}%</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <hr>

              <div id="cardMetodosPagoInformacion">

                <h4 class="card-title text-center ">Opciones de Entrega</h4>
                <p class=" text-center px-2">Contamos con algunas opciones para facilitar la entrega de
                  nuestros productos, si no encuentras una opción que se ajuste a tus necesidades de seguro llegaremos
                  a un acuerdo </p>

                <div class="social-box"
                     *ngIf="this.objTransferencia.Tipo_Pago!=null || this.objEfectivo.Tipo_Pago!=null || this.objElectronico.Tipo_Pago!=null">
                  <div class="container">
                    <div class="row justify-content-center px-3">

                      <div class="card col-md-4" *ngFor="let envio of this.productoDetalle.TIENDA.OPCION_ENVIOs">
                        <div class="card-body" *ngIf="envio.TIPO_ENVIO=='Domicilio'">
                          <h5 class="card-title">Entrega a {{envio.TIPO_ENVIO}}</h5>
                          <h6 class="card-subtitle mb-2 text-muted" *ngIf="envio.TIPO_UBICACION=='Resto'">Otras
                            provincias <i class="fas fa-map-marker-alt"></i></h6>
                          <h6 class="card-subtitle mb-2 text-muted"
                              *ngIf="envio.TIPO_UBICACION!='Resto'">{{envio.TIPO_UBICACION}}   <i
                            class="fas fa-map-marker-alt"></i></h6>
                          <p class="card-text">{{envio.TIPO_MEDIDA}}   Mínimo del pedido: {{envio.MINIMO}}<a
                            *ngIf="envio.TIPO_MEDIDA=='Peso'">Kg</a> <a *ngIf="envio.TIPO_MEDIDA=='Precio'">$</a></p>
                          <p>{{envio.TIPO_MEDIDA}} Máximo: {{envio.MAXIMO}}<a *ngIf="envio.TIPO_MEDIDA=='Peso'">Kg</a>
                            <a *ngIf="envio.TIPO_MEDIDA=='Precio'">$</a></p>
                          <p style="font-weight: bold" class="text-primary">Costo de envío: <a
                            *ngIf="envio.PRECIO!=0"> {{envio.PRECIO}}$</a> <span *ngIf="envio.PRECIO==0"
                                                                                 class="badge badge-pill badge-primary">Gratis</span>
                          </p>
                          <p *ngIf="envio.INSTRUCCION_RETIRO">Instrucciones de envío {{envio.INSTRUCCION_RETIRO}} </p>

                        </div>

                        <div class="card-body" *ngIf="envio.TIPO_ENVIO=='Retiro'">
                          <h5 class="card-title"> {{envio.TIPO_ENVIO}} en el local</h5>
                          <p *ngIf="envio.INSTRUCCION_RETIRO">Instrucciones de envío:  {{envio.INSTRUCCION_RETIRO}} </p>

                        </div>
                      </div>

                    </div>
                  </div>
                </div>

              </div>
            </article> <!-- card.// -->

          </ng-template>
        </ngb-tab>
      </ngb-tabset>

    </div> <!-- container.// -->
  </section>
  <!-- ============================ COMPONENT SECCION INFORMACION  .//END ================================= -->


  <hr>
  <br>
  <div class="container ">
    <h4 class="font-weight-bold">Opiniones de clientes</h4>
    <br>
    <div *ngIf="this.productoDetalle?.PRODUCTO.COMENTARIOs.length==0">
      <p>No existen comentarios</p>
    </div>
    <div *ngFor="let comentario of this.productoDetalle?.PRODUCTO.COMENTARIOs">
      <hr class="my-0">
      <div class="row no-gutters ">
        <div class="col-md-1 mt-md-0 mt-2 justify-content-center align-items-center dis-flex ">
          <img src="assets/images/user.png" class="card-img " style="width: 50px" alt="usuario">
        </div>
        <div class="col-md-9 col-10">
          <div class="card-body py-2">
            <label class="font-weight-bold mb-0">{{comentario.AGENTE.NOMBRE}}</label>
            <label class="card-text mb-0 w-100">{{comentario.COMENTARIO}}</label>
            <p class="card-text mb-0"><small class="text-muted">{{comentario.FECHA_COMENTARIO | date}}</small></p>

          </div>
        </div>
        <div class="col-2 justify-content-center align-items-center dis-flex ml-auto"
             *ngIf="comentario.AGENTE.COD_AGENTE==identidadAgente?.COD_AGENTE">
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" class=" btn text-primary"
                    (click)="abrirModalComentario(contentComentario,comentario.ID_COMENTARIO)">
              <li class=" fa fa-pen"></li>
            </button>
            <button type="button" class="btn text-danger" (click)="deleteComentario(comentario.ID_COMENTARIO)">
              <li class="fa fa-trash"></li>
            </button>
          </div>
        </div>
      </div>

      <hr class="my-0">

    </div>
  </div>
  <br>
  <br><br><br><br><br><br>
</form>
</body>
</section>
