<body class="bg">
<div class=" mt-5"  [ngClass]="{'container':this.misPedidos?.length==0, 'container-fluid':this.misPedidos?.length>0}">
  <div class="row  justify-content-center">
    <h4 class=" col-md-11 text-left">Listado de pedidos</h4>
    <hr class=" col-md-11  ">
  </div>
  <div *ngIf="this.misPedidos?.length==0" class="row justify-content-center   ">
    <div class=" col-md-9  ml-md-5 ">
      <div class=" container  bg-white  shadow ">
        <br><br><br>
        <div class="mx-auto">
          <p class=" iconos-pagos "><span class="  fa fa-truck fa-5x" style="color: #2a4c75"></span> &nbsp;<label
            style="font-size: large">Pedidos</label></p>

        </div>
        <br><br>
        <div class="mx-auto">
          <h5 class="text-center">Gestiona tus pedidos</h5>
          <br>
          <div class=" mx-md-5  mx-auto">
            <p class="text-center mx-md-5">Aquí se listarán todos los pedidos solicitados por tus clientes, los cuales tendrás que atender de la forma más rapida posible </p>
          </div>
        </div>

        <br> <br>

        <br>
      </div>
    </div>

    <div class=" col-md-2   mt-5 mt-md-0   jackInTheBox   animated px-0 ">
      <div class="container card  card-body  shadow  ">
        <h5>Atento!</h5>
        <hr class="mb-0">
        <br>
        <p class=" iconos-pagos ">
          <img class="mx-auto  pt-md-4  mensaje-mascota " src="../../../assets/images/mascota-condero.png" width="100%">
        </p>
        <br><br><br>

      </div>
    </div>
  </div>
  <div  *ngIf="misPedidos?.length>0" class="container-fluid mx-auto px-md-5 ">
    <div class="row mb-2  ">
      <div class=" input-group col-lg-6 mr-lg-auto pr-0" >
        <input class="form-control " style="font-size: small" type="text" #busquedaasd="ngModel"
               [(ngModel)]="this.busqueda" name="Busquedaasd" (input)="filtrar()"/>
        <div class="input-group-append ">
          <span class="input-group-text  "><li class="fas fa-search"></li></span>
        </div>
        &nbsp; &nbsp; &nbsp;
      </div>
      <div class="col-md-auto ">
        <button class="btn btn-primary w-100 mt-md-0 mt-2" style="font-size:small"  routerLink="../productos">Nuevo Producto</button>
      </div>
    </div>
    <div *ngIf="loading">
      <label>Buscando . . .</label>
      &nbsp; &nbsp; &nbsp;
      <div class="progress">
        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75"
             aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
      </div>
    </div>


    <div *ngIf="this.result.length==0" class="ml-1"><p>No se encontraron resultados.</p></div>
    <table class="table table-bordered table-responsive-sm bg-white small w-100 text-center" *ngIf="this.result.length>0">
      <thead>
      <tr>

        <th scope="col">PEDIDO NO</th>
        <th scope="col">REALIZADO EL</th>
        <th scope="col">REALIZADO POR</th>
        <th scope="col">TELEFONO</th>
        <th scope="col">CORREO</th>
        <th scope="col">MÉTODO DE COMPRA</th>
        <th scope="col">MÉTODO DE ENVÍO</th>
        <th scope="col">PESO</th>
        <th scope="col">OPCIÓN</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let compra of   this.result  |slice: (page-1) * pageSize : (page-1) * pageSize + pageSize; index as i">
        <td>
          {{compra.NUM_COMPRA}}
        </td>
        <td>
          {{compra.FECHA_COMPRA}}
        </td>
        <td>
          {{compra.AGENTE.NOMBRE}}
        </td>
        <td>
          <label *ngIf="compra.AGENTE.TELEFONO">{{compra.AGENTE.TELEFONO}}</label>
           <label *ngIf="compra.TELEFONO_FACTURA && !compra.AGENTE.TELEFONO"> {{compra.TELEFONO_FACTURA}}</label>
        </td>
        <td>

          {{compra.AGENTE.CORREO}}
        </td>
        <td>

          {{compra.METODO_PAGO}}
        </td>
        <td>
          <label *ngIf="compra.METODO_ENVIO=='Acordar'">Por acordar</label>
          <label *ngIf="compra.METODO_ENVIO=='Domicilio'">Envío a domicilio</label>
          <label *ngIf="compra.METODO_ENVIO=='Retiro'">Retiro desde la tienda</label>
        </td>
        <td>
          {{compra.peso}} kg
        </td>
        <td>
          <div class="btn-group">
            <button (click)="cambiarEstadoProducto(producto.ID_OFERTA,0)" placement="top" ngbTooltip="Gestionar"
                    class="btn btn-secondary   mt-md-0 mt-1" style="font-size: x-small">
              <span class="fa fa-cog"></span>
            </button>

          </div>
        </td>
      </tr>
      </tbody>
    </table>

    <div *ngIf="this.result.length > 0" class="d-flex justify-content-between p-2">
      <ngb-pagination id="paginacion"
                      [(page)]="page"
                      [pageSize]="pageSize"
                      [collectionSize]="this.result.length" [rotate]="true" [ellipses]="true" [boundaryLinks]="false">
        <ng-template ngbPaginationPrevious>Anterior</ng-template>
        <ng-template ngbPaginationNext>Siguiente</ng-template>
      </ngb-pagination>
    </div>
  </div>
</div>


</body>
