!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-paypal",["exports","@angular/common","@angular/core","rxjs"],t):t((e=e||self)["ngx-paypal"]={},e.ng.common,e.ng.core,e.rxjs)}(this,(function(e,t,n,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}var o=function(){function e(e){this.zone=e}return e.prototype.registerScript=function(e,t,n){var r=this,i=window[t];if(i)this.zone.run((function(){n(i)}));else{var a=document.createElement("script");a.id=this.getElemId(t),a.innerHTML="",a.onload=function(){r.zone.run((function(){n(window[t])}))},a.src=e,a.async=!0,a.defer=!0,document.getElementsByTagName("head")[0].appendChild(a)}},e.prototype.cleanup=function(e){var t=document.getElementById(this.getElemId(e));t&&t.remove()},e.prototype.getElemId=function(e){return"ngx-paypal-script-elem-"+e},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[{type:n.NgZone}]},e}();var c=function(){function e(e){this.scriptService=e,this.paypalWindowName="paypal"}return e.prototype.registerPayPalScript=function(e,t){this.scriptService.registerScript(this.getUrlForConfig(e),this.paypalWindowName,t)},e.prototype.destroyPayPalScript=function(){this.scriptService.cleanup(this.paypalWindowName)},e.prototype.getUrlForConfig=function(e){var t=[{name:"client-id",value:e.clientId}];return e.currency&&t.push({name:"currency",value:e.currency}),e.commit&&t.push({name:"commit",value:e.commit}),e.vault&&t.push({name:"vault",value:e.vault}),e.extraParams&&t.push.apply(t,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}(e.extraParams)),"https://www.paypal.com/sdk/js"+this.getQueryString(t)},e.prototype.getQueryString=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=0===n?"?":"&",t+=r.name+"="+r.value}return t},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[{type:o}]},e}();var u=function(){function e(e,t,i){this.paypalScriptService=e,this.cdr=t,this.ngZone=i,this.registerScript=!0,this.scriptLoaded=new n.EventEmitter,this.ngUnsubscribe=new r.Subject,this.initializePayPal=!0}return Object.defineProperty(e.prototype,"payPalButtonContainer",{set:function(e){this.payPalButtonContainerElem=e},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){var t=this;this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());var n=this.config;e.config.isFirstChange()&&n&&this.registerScript&&this.initPayPalScript(n,(function(e){t.payPal=e,t.doPayPalCheck()})),e.config.isFirstChange()||this.reinitialize(n)},e.prototype.ngOnDestroy=function(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.prototype.ngAfterViewInit=function(){this.doPayPalCheck()},e.prototype.customInit=function(e){this.payPal=e,this.doPayPalCheck()},e.prototype.reinitialize=function(e){var t=this;if(this.config=e,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild);this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,(function(e){t.payPal=e,t.doPayPalCheck()})))},e.prototype.doPayPalCheck=function(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))},e.prototype.initPayPalScript=function(e,t){var n=this;this.paypalScriptService.registerPayPalScript({clientId:e.clientId,commit:e.advanced&&e.advanced.commit?e.advanced.commit:void 0,currency:e.currency,vault:e.vault,extraParams:e.advanced&&e.advanced.extraQueryParams?e.advanced.extraQueryParams:[]},(function(e){n.scriptLoaded.next(e),t(e)}))},e.prototype.generateElementId=function(){return"ngx-captcha-id-"+(new Date).valueOf()},e.prototype.initPayPal=function(e,t){var n=this;this.ngZone.runOutsideAngular((function(){var r=i(i(i({style:e.style,onApprove:function(t,r){return n.ngZone.run((function(){if(e.onApprove&&e.onApprove(t,r),e.authorizeOnServer)return e.authorizeOnServer(t,r);var i=e.onClientAuthorization;i&&r.order.capture().then((function(e){n.ngZone.run((function(){i(e)}))}))}))},onError:function(t){n.ngZone.run((function(){e.onError&&e.onError(t)}))},onCancel:function(t,r){n.ngZone.run((function(){e.onCancel&&e.onCancel(t,r)}))},onClick:function(t,r){n.ngZone.run((function(){e.onClick&&e.onClick(t,r)}))},onInit:function(t,r){n.ngZone.run((function(){e.onInit&&e.onInit(t,r)}))}},(e.createOrderOnClient||e.createOrderOnServer)&&{createOrder:function(t,r){return n.ngZone.run((function(){if(e.createOrderOnClient&&e.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!e.createOrderOnClient&&!e.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(e.createOrderOnClient)return r.order.create(e.createOrderOnClient(t));if(e.createOrderOnServer)return e.createOrderOnServer(t);throw Error("Invalid state for 'createOrder'.")}))}}),e.createSubscription&&{createSubscription:function(t,r){return n.ngZone.run((function(){if(e.createSubscription)return e.createSubscription(t,r)}))}}),e.onShippingChange&&{onShippingChange:function(t,r){return n.ngZone.run((function(){if(e.onShippingChange)return e.onShippingChange(t,r)}))}});t.Buttons(r).render("#"+n.payPalButtonContainerId)}))},e.decorators=[{type:n.Component,args:[{changeDetection:n.ChangeDetectionStrategy.OnPush,selector:"ngx-paypal",template:'\n    <div #payPalButtonContainer [id]="payPalButtonContainerId"></div>\n    '}]}],e.ctorParameters=function(){return[{type:c},{type:n.ChangeDetectorRef},{type:n.NgZone}]},e.propDecorators={config:[{type:n.Input}],registerScript:[{type:n.Input}],scriptLoaded:[{type:n.Output}],payPalButtonContainer:[{type:n.ViewChild,args:["payPalButtonContainer",{static:!1}]}]},e}();var p=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[u],exports:[u],providers:[o,c]}]}],e}();e.NgxPayPalModule=p,e.NgxPaypalComponent=u,e.PayPalScriptService=c,e.Éµa=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-paypal.umd.min.js.map