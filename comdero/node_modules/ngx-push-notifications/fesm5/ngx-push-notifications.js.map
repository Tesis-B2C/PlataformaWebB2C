{"version":3,"file":"ngx-push-notifications.js.map","sources":["ng://ngx-push-notifications/src/app/services/push-notification.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, from } from 'rxjs';\r\n\r\nexport class PushNotificationOptions {\r\n  public body: string;\r\n  public icon: string;\r\n  public sound: string;\r\n  public data: any;\r\n  public tag: string;\r\n  public dir = 'auto' as NotificationDirection;\r\n  public lang = 'en-US';\r\n  public renotify = false;\r\n  public sticky = false;\r\n  public vibrate: Array<number>;\r\n  public noscreen = false;\r\n  public silent = true;\r\n}\r\n\r\n@Injectable()\r\nexport class PushNotificationService {\r\n  constructor() {\r\n  }\r\n  public checkCompatibility () {\r\n    return !!('Notification' in window);\r\n  }\r\n  public requestPermission(): Observable<NotificationPermission> {\r\n    return from(Notification.requestPermission()) as Observable<NotificationPermission>;\r\n  }\r\n  public isPermissionGranted (permission) {\r\n    return permission === 'granted';\r\n  }\r\n  public create (title: string, options?: PushNotificationOptions): Observable<any> {\r\n    return new Observable((obs: any) => {\r\n       if (!this.checkCompatibility()) {\r\n         const err = 'Notifications are not available in this browser.';\r\n         console.error(err);\r\n         obs.error(err);\r\n         obs.complete();\r\n      }\r\n\r\n      this.requestPermission().subscribe((perm: NotificationPermission) => {\r\n        if (!this.isPermissionGranted(perm)) {\r\n          const err = 'The user hasn\\'t granted you permission to send push notifications';\r\n          console.error(err);\r\n          obs.error(err);\r\n          obs.complete();\r\n        } else {\r\n          const notif = new Notification(title, options);\r\n          notif.onshow = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n          notif.onclick = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n          notif.onerror = (e: any) => {\r\n            obs.error({ notification: notif, event: e });\r\n          };\r\n          notif.onclose = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;IAGA;QAMS,QAAG,sBAAG,MAAM,EAAyB,CAAC;QACtC,SAAI,GAAG,OAAO,CAAC;QACf,aAAQ,GAAG,KAAK,CAAC;QACjB,WAAM,GAAG,KAAK,CAAC;QAEf,aAAQ,GAAG,KAAK,CAAC;QACjB,WAAM,GAAG,IAAI,CAAC;KACtB;IAAD,8BAAC;CAAA,IAAA;;IAIC;KACC;;;;IACM,oDAAkB;;;IAAzB;QACE,OAAO,CAAC,EAAE,cAAc,IAAI,MAAM,CAAC,CAAC;KACrC;;;;IACM,mDAAiB;;;IAAxB;QACE,0BAAO,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,GAAuC;KACrF;;;;;IACM,qDAAmB;;;;IAA1B,UAA4B,UAAU;QACpC,OAAO,UAAU,KAAK,SAAS,CAAC;KACjC;;;;;;IACM,wCAAM;;;;;IAAb,UAAe,KAAa,EAAE,OAAiC;QAA/D,iBAgCC;QA/BC,OAAO,IAAI,UAAU;;;;QAAC,UAAC,GAAQ;YAC5B,IAAI,CAAC,KAAI,CAAC,kBAAkB,EAAE,EAAE;;oBACxB,GAAG,GAAG,kDAAkD;gBAC9D,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACnB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACf,GAAG,CAAC,QAAQ,EAAE,CAAC;aACjB;YAED,KAAI,CAAC,iBAAiB,EAAE,CAAC,SAAS;;;;YAAC,UAAC,IAA4B;gBAC9D,IAAI,CAAC,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE;;wBAC7B,GAAG,GAAG,oEAAoE;oBAChF,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACnB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACf,GAAG,CAAC,QAAQ,EAAE,CAAC;iBAChB;qBAAM;;wBACC,OAAK,GAAG,IAAI,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC;oBAC9C,OAAK,CAAC,MAAM;;;;oBAAG,UAAC,CAAM;wBACpB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;qBAC7C,CAAA,CAAC;oBACF,OAAK,CAAC,OAAO;;;;oBAAG,UAAC,CAAM;wBACrB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;qBAC7C,CAAA,CAAC;oBACF,OAAK,CAAC,OAAO;;;;oBAAG,UAAC,CAAM;wBACrB,GAAG,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;qBAC9C,CAAA,CAAC;oBACF,OAAK,CAAC,OAAO;;;;oBAAG,UAAC,CAAM;wBACrB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;qBAC7C,CAAA,CAAC;iBACH;aACF,EAAC,CAAC;SACJ,EAAC,CAAC;KACJ;;gBA7CF,UAAU;;;;IA8CX,8BAAC;CA9CD;;;;;;;;;;;;;;"}
