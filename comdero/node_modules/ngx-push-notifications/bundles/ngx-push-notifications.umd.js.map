{"version":3,"file":"ngx-push-notifications.umd.js.map","sources":["ng://ngx-push-notifications/src/app/services/push-notification.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, from } from 'rxjs';\r\n\r\nexport class PushNotificationOptions {\r\n  public body: string;\r\n  public icon: string;\r\n  public sound: string;\r\n  public data: any;\r\n  public tag: string;\r\n  public dir = 'auto' as NotificationDirection;\r\n  public lang = 'en-US';\r\n  public renotify = false;\r\n  public sticky = false;\r\n  public vibrate: Array<number>;\r\n  public noscreen = false;\r\n  public silent = true;\r\n}\r\n\r\n@Injectable()\r\nexport class PushNotificationService {\r\n  constructor() {\r\n  }\r\n  public checkCompatibility () {\r\n    return !!('Notification' in window);\r\n  }\r\n  public requestPermission(): Observable<NotificationPermission> {\r\n    return from(Notification.requestPermission()) as Observable<NotificationPermission>;\r\n  }\r\n  public isPermissionGranted (permission) {\r\n    return permission === 'granted';\r\n  }\r\n  public create (title: string, options?: PushNotificationOptions): Observable<any> {\r\n    return new Observable((obs: any) => {\r\n       if (!this.checkCompatibility()) {\r\n         const err = 'Notifications are not available in this browser.';\r\n         console.error(err);\r\n         obs.error(err);\r\n         obs.complete();\r\n      }\r\n\r\n      this.requestPermission().subscribe((perm: NotificationPermission) => {\r\n        if (!this.isPermissionGranted(perm)) {\r\n          const err = 'The user hasn\\'t granted you permission to send push notifications';\r\n          console.error(err);\r\n          obs.error(err);\r\n          obs.complete();\r\n        } else {\r\n          const notif = new Notification(title, options);\r\n          notif.onshow = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n          notif.onclick = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n          notif.onerror = (e: any) => {\r\n            obs.error({ notification: notif, event: e });\r\n          };\r\n          notif.onclose = (e: any) => {\r\n            obs.next({ notification: notif, event: e });\r\n          };\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n"],"names":["from","Observable","Injectable"],"mappings":";;;;;;;;;;AAAA;QAGA;YAMS,QAAG,sBAAG,MAAM,EAAyB,CAAC;YACtC,SAAI,GAAG,OAAO,CAAC;YACf,aAAQ,GAAG,KAAK,CAAC;YACjB,WAAM,GAAG,KAAK,CAAC;YAEf,aAAQ,GAAG,KAAK,CAAC;YACjB,WAAM,GAAG,IAAI,CAAC;SACtB;QAAD,8BAAC;IAAD,CAAC,IAAA;;QAIC;SACC;;;;QACM,oDAAkB;;;YAAzB;gBACE,OAAO,CAAC,EAAE,cAAc,IAAI,MAAM,CAAC,CAAC;aACrC;;;;QACM,mDAAiB;;;YAAxB;gBACE,0BAAOA,SAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,CAAC,GAAuC;aACrF;;;;;QACM,qDAAmB;;;;YAA1B,UAA4B,UAAU;gBACpC,OAAO,UAAU,KAAK,SAAS,CAAC;aACjC;;;;;;QACM,wCAAM;;;;;YAAb,UAAe,KAAa,EAAE,OAAiC;gBAA/D,iBAgCC;gBA/BC,OAAO,IAAIC,eAAU;;;mBAAC,UAAC,GAAQ;oBAC5B,IAAI,CAAC,KAAI,CAAC,kBAAkB,EAAE,EAAE;;4BACxB,GAAG,GAAG,kDAAkD;wBAC9D,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACnB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACf,GAAG,CAAC,QAAQ,EAAE,CAAC;qBACjB;oBAED,KAAI,CAAC,iBAAiB,EAAE,CAAC,SAAS;;;uBAAC,UAAC,IAA4B;wBAC9D,IAAI,CAAC,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAAE;;gCAC7B,GAAG,GAAG,oEAAoE;4BAChF,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACnB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACf,GAAG,CAAC,QAAQ,EAAE,CAAC;yBAChB;6BAAM;;gCACC,OAAK,GAAG,IAAI,YAAY,CAAC,KAAK,EAAE,OAAO,CAAC;4BAC9C,OAAK,CAAC,MAAM;;;+BAAG,UAAC,CAAM;gCACpB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;6BAC7C,CAAA,CAAC;4BACF,OAAK,CAAC,OAAO;;;+BAAG,UAAC,CAAM;gCACrB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;6BAC7C,CAAA,CAAC;4BACF,OAAK,CAAC,OAAO;;;+BAAG,UAAC,CAAM;gCACrB,GAAG,CAAC,KAAK,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;6BAC9C,CAAA,CAAC;4BACF,OAAK,CAAC,OAAO;;;+BAAG,UAAC,CAAM;gCACrB,GAAG,CAAC,IAAI,CAAC,EAAE,YAAY,EAAE,OAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;6BAC7C,CAAA,CAAC;yBACH;qBACF,EAAC,CAAC;iBACJ,EAAC,CAAC;aACJ;;oBA7CFC,eAAU;;;;QA8CX,8BAAC;KA9CD;;;;;;;;;;;;;;;;;;;;;;;"}
